function modula_pro_get_url_parameters(e){return decodeURIComponent((new RegExp("[?|&]"+e+"=([^&;]+?)(&|#|;|$)").exec(location.search)||[,""])[1].replace(/\+/g,"%20"))||!1}function modula_pro_enable_lightbox(t){if(void 0!==wpModulaProHelper.lightboxes[t.options.lightbox]){var e=wpModulaProHelper.lightboxes[t.options.lightbox];"magnific"==t.options.lightbox&&"function"==typeof jQuery.fn.magnificPopup?(e.options.delegate="a.tile-inner[data-cyclefilter='show']",e.options.callbacks={beforeOpen:function(){jQuery(document).trigger("modula_magnific_lightbox_before_open",[event,t,this])},elementParse:function(e){jQuery(document).trigger("modula_magnific_lightbox_elementparse",[event,t,this,e])},change:function(){jQuery(document).trigger("modula_magnific_lightbox_change",[event,t,this])},resize:function(){jQuery(document).trigger("modula_magnific_lightbox_resize",[event,t,this])},open:function(){jQuery(document).trigger("modula_magnific_lightbox_open",[event,t,this])},beforeClose:function(){jQuery(document).trigger("modula_magnific_lightbox_before_close",[event,t,this])},close:function(){jQuery(document).trigger("modula_magnific_lightbox_close",[event,t,this])},afterClose:function(){jQuery(document).trigger("modula_magnific_lightbox_after_close",[event,t,this])},imageLoadComplete:function(){jQuery(document).trigger("modula_magnific_lightbox_image_load_complete",[event,t,this])}},jQuery(t.element).magnificPopup(e.options)):"prettyphoto"==t.options.lightbox&&"function"==typeof jQuery.fn.prettyPhoto?(e.options.changepicturecallback=function(){jQuery(document).trigger("modula_prettyphoto_lightbox_change",[t,this])},e.options.callback=function(){jQuery(document).trigger("modula_prettyphoto_lightbox_close",[t,this])},jQuery(t.element).find('a.tile-inner[data-cyclefilter="show"]').prettyPhoto(e.options)):"fancybox"==t.options.lightbox&&"function"==typeof jQuery.fn.fancybox?(e.options.beforeLoad=function(){jQuery(document).trigger("modula_fancybox_lightbox_before_load",[t,this])},e.options.afterLoad=function(){jQuery(document).trigger("modula_fancybox_lightbox_after_load",[t,this])},e.options.beforeShow=function(){jQuery(document).trigger("modula_fancybox_lightbox_before_show",[t,this])},e.options.afterShow=function(){jQuery(document).trigger("modula_fancybox_lightbox_after_show",[t,this])},e.options.beforeClose=function(){jQuery(document).trigger("modula_fancybox_lightbox_before_close",[t,this])},e.options.afterClose=function(){jQuery(document).trigger("modula_fancybox_lightbox_after_close",[t,this])},e.options.onInit=function(){jQuery(document).trigger("modula_fancybox_lightbox_on_init",[t,this])},e.options.onActivate=function(){jQuery(document).trigger("modula_fancybox_lightbox_on_activate",[t,this])},e.options.onDeactivate=function(){jQuery(document).trigger("modula_fancybox_lightbox_on_deactivate",[t,this])},jQuery(t.element).find('a.tile-inner[data-cyclefilter="show"]').fancybox(e.options)):"swipebox"==t.options.lightbox&&"function"==typeof jQuery.fn.swipebox?(e.options.beforeOpen=function(){jQuery(document).trigger("modula_swipebox_lightbox_before_open",[t,this])},e.options.afterOpen=function(){jQuery(document).trigger("modula_swipebox_lightbox_after_open",[t,this])},e.options.afterClose=function(){jQuery(document).trigger("modula_swipebox_lightbox_after_close",[t,this])},e.options.nextSlide=function(){setTimeout(function(){jQuery(document).trigger("modula_swipebox_lightbox_next_slide",[t,this])},500)},e.options.prevSlide=function(){setTimeout(function(){jQuery(document).trigger("modula_swipebox_lightbox_prev_slide",[t,this])},500)},jQuery(t.element).find('a.tile-inner[data-cyclefilter="show"]').swipebox(e.options)):"lightgallery"==t.options.lightbox&&"function"==typeof jQuery.fn.lightGallery&&(void 0!==jQuery(t.element).data("lightGallery")&&jQuery(t.element).data("lightGallery").destroy(!0),e.options.selector="a.tile-inner[data-cyclefilter='show']",jQuery(t.element).lightGallery(e.options))}}jQuery(document).on("modula_api_after_init",function(e,o){var t,n;if(n=o.$element.find(".hidden-items a"),0<(t=jQuery(o.element).find(".filters > ul.menu__list > li > a")).length){var r=o.options.filterClick,i=modula_pro_get_url_parameters("jtg-filter");if(i){var l="jtg-filter-"+i;o.$items.find("a").attr("data-cyclefilter","show"),o.$items.show(),n.attr("data-cyclefilter","show"),"all"!=i&&(o.$items.not("."+l).hide().addClass("jtg-hidden"),o.$items.not("."+l).find("a").attr("data-cyclefilter","hide"),n.not("."+l).attr("data-cyclefilter","hide"),jQuery(".filters .menu__item--current").removeClass("menu__item--current"),o.$element.find("a[data-filter='"+i+"']").parent().addClass("menu__item--current"),o.reset())}if("All"!=o.options.defaultActiveFilter&&"all"!=o.options.defaultActiveFilter&&""!=o.options.defaultActiveFilter&&!i)0<jQuery(o.element).find('.filters a[data-filter="'+o.options.defaultActiveFilter+'"]').length&&(t.parent().removeClass("menu__item--current"),t.filter('[data-filter="'+o.options.defaultActiveFilter+'"]').parent().addClass("menu__item--current"),o.$items.hide().addClass("jtg-hidden"),o.$items.filter(".jtg-filter-"+o.options.defaultActiveFilter).show().removeClass("jtg-hidden"),o.$items.filter(".jtg-filter-"+o.options.defaultActiveFilter).find("a").attr("data-cyclefilter","show"),n.attr("data-cyclefilter","hide"),n.filter(".jtg-filter-"+o.options.defaultActiveFilter).attr("data-cyclefilter","show")),o.reset();o.$element.on("click",".filters a",function(e){if("0"!=r)return!0;if(e.preventDefault(),!jQuery(this).parent().hasClass("menu__item--current")){var t=jQuery(this).data("filter");o.$element.find(".filters .menu__item--current").removeClass("menu__item--current"),o.$element.find(".filters a[data-filter='"+jQuery(this).attr("data-filter")+"']").parent().addClass("menu__item--current");var i="jtg-filter-"+t;i?(o.$items.show().removeClass("jtg-hidden"),o.$items.find("a").attr("data-cyclefilter","show"),o.$items.not("."+i).hide().addClass("jtg-hidden"),o.$items.not("."+i).find("a").attr("data-cyclefilter","hide"),n.attr("data-cyclefilter","show"),n.not("."+i).attr("data-cyclefilter","hide")):(o.$items.find("a").attr("data-cyclefilter","show"),o.$items.show().removeClass("jtg-hidden"),n.attr("data-cyclefilter","show")),modula_pro_enable_lightbox(o),o.reset()}})}modula_pro_enable_lightbox(o),o.$element.find(".filter-by-wrapper").click(function(){var e=jQuery(this);o.$element.find(".filters").hasClass("active")?(o.$element.find(".filters").hide(600).removeClass("active"),e.removeClass("opened")):(o.$element.find(".filters").show(600).addClass("active"),e.addClass("opened"))})});